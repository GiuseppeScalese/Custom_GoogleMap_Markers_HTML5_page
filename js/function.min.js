var MyApp=MyApp||{},MyApp=function(){var a=[],b=function(a,b,c,e){for(var f=[],g=0;g<e.locations.length;g++){var h=e.locations[g],i=new google.maps.LatLng(parseFloat(e.locations[g].lat),parseFloat(e.locations[g].lng)),j=new google.maps.Marker({position:i,map:a,icon:e.locations[g].image,shape:b,people:e.locations[g].people,location:e.locations[g].name});f.push(h);var k='<span class="employee-info">In '+j.location+" there are "+j.people+" employees</span>",l=new google.maps.InfoWindow({content:k,maxWidth:200});d(a,j,k,l,h)}return f},c=function(){a.length>0&&(a[0].set("marker",null),a[0].close(),a.length=0)},d=function(b,d,e,f,g){google.maps.event.addListener(d,"click",function(d,e,f){return function(){c(),f.setContent(e),f.open(b,d),a[0]=f}}(d,e,f))},e=function(a){var c={url:"img/marker1_icon.png",size:new google.maps.Size(51,67),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,32)},d={coords:[20,3,1,80,88,20,1,1],type:"poly"},e="img/",f={madrid:{icon:e+"marker4_icon.png"},london:{icon:e+"marker3_icon.png"},zurich:{icon:e+"marker1_icon.png"},budapest:{icon:e+"marker2_icon.png"}},g={locations:[{name:"Madrid",lat:"40.4167754",lng:"-3.7037902",people:"4",image:f.madrid.icon},{name:"Zurich",lat:"47.3768866",lng:"8.541694",people:"10",image:f.zurich.icon},{name:"London",lat:"51.5073509",lng:"-0.1277583",people:"23",image:f.london.icon},{name:"Budapest",lat:"47.497912",lng:"19.040235",people:"6",image:f.budapest.icon}]};b(a,d,c,g)},f=function(){var a={center:{lat:47.5230557,lng:5.9884754},zoom:5},b=new google.maps.Map(document.getElementById("map-canvas"),a);e(b)},g=function(){f()};return{loadMap:g}}();MyApp.loadMap();